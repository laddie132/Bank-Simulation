# Virtual-Bank-System-1.1.0

(This is a version of command line.)

                                            模拟银行营业厅排队系统的实验要求
要求根据下面的功能描述实现模拟银行排队软件。
一．银行营业厅配置
1.  共有1家银行营业厅，营业窗口共8个，其中2个是VIP窗口，6个是普通窗口。初始状态下，先开放1个VIP窗口和3个普通窗口。当“普通客户”排队人数为“普通窗口”数3倍时，可以动态增加1个普通窗口数量，最多增加3个窗口；当排队人数小于窗口数2倍时，动态关闭增加的窗口，恢复原来窗口数。
   同理，当“VIP客户”排队数量超过3人时，开放第二个VIP窗口。当在设置时长 VIPSERVLen内VIP客户数一直小于3人，则动态关闭增加的VIP窗口，恢复原来窗口数。VIPSERVLen是系统可以配置的参数，保存在配置文件中，系统初始化时需要读取此参数。
  根据策略的不同，VIP客户也可能转去服务普通客户。
2. 每位客户进入营业厅后，在取号机上申请一个服务号码，然后排队等待营业窗口叫号。
3. 服务号码根据客户级别分为两类，一类是普通客户，一类是VIP客户。申请VIP客户服务的人，在申请时必须提供VIP身份号，经过银行客户资料核对后，通过者才可以分配得到一个VIP服务号码。普通客户类服务号码和VIP客户类服务号码分开两队，都按先后顺序排队。普通号码范围：000~999；VIP号码范围：V00~V99。
4. 营业窗口按服务号码的顺序，叫号为客户办理。营业窗口叫号后，进入办理状态。
5. 营业窗口在办完一项业务后，可以暂停办理，停止叫号，申请休息一段时间。系统需要根据当前的窗口情况和队列情况决定窗口能否休息。至少要有一个VIP窗口，3个普通窗口在营业中。
6. 当下班时间到或收到“下班”指令后，不再接受新来的客户；等原有排队的客户都被处理完毕，才允许正式下班，关闭营业厅，退出程序。

二．银行营业厅的运行控制
1．营业厅的初始状态是各窗口空闲，处于等待服务状态；两类服务号码初始都设为0。
2．客户可以在任意时刻进入营业厅，申请普通服务或VIP服务。
3．	申请普通服务，不需要核对身份，直接在当前最大普通服务号码上加1，分配给客户。申请VIP服务，需要客户输入VIP身份号，核对银行VIP文件，若该身份号存在并有效，在当前最大VIP服务号码上加1，分配给客户；若该身份号不存在，提示重新输入，三次错误以后，转为分配普通服务号码给客户。
4．	如果VIP客户到达，并成功申请到VIP服务号码。此时若VIP优先服务窗口都正在办理业务，新到的客户排队等待。若VIP优先服务窗口有转去办理普通业务的，那么办完当前普通业务后要立刻转回办理VIP业务。
5．	客户办理业务的时间长短由随机数产生，范围在MinSec到MaxSec之间，窗口暂停休息时间长短由随机数产生，范围在MinRestSec到MaxRestSec之间。MinSec，MaxSec，MinRestSec，MaxRestSec这四个值是系统可以配置的参数，保存在配置文件中，系统初始化时需要读取此参数。
6．	营业窗口办理业务时，显示当前处理的服务号码；叫号时，显示等待的服务号码；暂停时显示“pause”。
7．	当下班时间到或者下班指令发出，要锁定取号机，不再发放新的客户号码。等待营业窗口将已有客户都服务完毕后，退出程序。
8．	客户业务办理结束后需要对营业员服务质量进行打分（满意/一般/不满意），该值随机产生。
9．	具备VIP客户资料的维护功能，可以在尚未开始营业时处理。VIP客户资料存储在一个二进制文件中，包括：客户姓名、客户VIP身份号和客户账户余额等。
10．	具备配置文件的维护功能，可以在尚未开始营业时处理。信息存储在一个文本文件中，包括MaxSeqLen（单队列最大允许等待长度），MinSec（单业务办理最短时长），MaxSec（单业务办理最长时长），MinRestSec（窗口休息最短时长），MaxRestSec（窗口休息最长时长）、VIPSERVLen这些参数。格式为：
   [MaxSeqLen]5
   [MinSec]10
   [MaxSec]30
   [MinRestSec]200
   [MaxRestSec]1000
   [VIPSERVLen]2000 
   文件中时间的单位是秒，如最小业务办理时间是10秒；队列长度单位是人，如单队列最大允许等待长度是5人。
12. 具备统计功能，统计出以下信息，写入统计结果文件中，该文件为文本文件。
       1）按窗口：统计各窗口受理的客户总数、总业务办理时长（不包括窗口申请的休息时间）、平均单笔业务办理时长。
       2）按营业厅：营业厅总共受理普通客户数量、VIP客户数量。
    三．银行营业厅的排队策略
以下是银行营业厅的几个排队策略：
1．先来先服务策略：
将同一类的服务号码按取号时间排队，然后一一交给最先空闲的窗口去办理。这是基本的排队策略，只需要设计一个将服务号码排队的数据结构。
VIP客户服务有自己的优先服务窗口，普通客户服务有其他的营业窗口，在两个队列都不空闲的时候，遵循这个服务策略。
2．	VIP窗口顺便服务策略：
VIP优先服务窗口，在VIP客户队列为空的时候，采取顺便服务策略：VIP窗口转变为普通服务窗口，跟其他窗口一起分担处理普通客户队列。转去办理普通业务的VIP窗口，当有VIP客户出现后，服务完当前正在办理的普通客户，要立刻转回为VIP客户提供服务。
3．	VIP窗口定向服务策略：
VIP窗口只服务于VIP客户。
VIP窗口顺便服务策略和VIP窗口定向服务策略都建立在先来先服务策略的基础之上。
要求实现上述策略。为了使得策略的更改对其他代码的影响尽量小，应在一相对独立的程序块中实现控制策略。

四．输入输出
要求开发两个版本：命令行版本和动画版本。具体说明如下：
命令行版本，要求实现键盘输入、命令行输出，并将输出结果记录到文件。
动画版本，要求实现图形界面输入、动画输出，并将输出结果记录到文件。
对配置文件，采用键盘输入。
		（一）输入
客户取号指令、VIP身份号以及VIP客户资料维护信息。输入可以采用两种方法：
a．从键盘输入。
输入客户取号指令、VIP身份号，以及营业窗口暂停、下班指令。我们可以设定按键如下：
‘G’表示一个普通客户到达。
‘V’表示一个VIP客户到达。
‘ID12345’表示一个VIP身份号12345。
‘R1’表示1号窗口请求暂停。
‘Q’表示下班。
维护银行VIP客户资料时，增删改查的操作，可以设置为以下按键：
‘X’表示进入VIP客户维护状态；
‘V+’表示添加一个VIP客户；
‘V-’表示删除一个VIP客户；
‘V/’表示更新一个VIP客户；
‘E’表示退出VIP客户维护状态；
b．图形界面输入。
程序进入时提示输入下班时间，然后程序根据窗口数绘制营业厅画面。
在营业厅画面中，显示取号机的普通客户取号和VIP客户取号两个按钮，鼠标点击这些按钮表示相应的客户取号动作。VIP客户的身份号，可以设置专门的输入框，或者按钮面板来支持鼠标输入操作。营业窗口叫号是程序自动触发，无须输入操作。
窗口中专门设置营业窗口暂停按钮，鼠标点击表示某窗口申请暂停。
窗口中显示下班的指令钮，鼠标点击表示发出下班指令。
备注：VIP客户资料的维护功能，动画版本不予考虑。
（二）输出
a．命令行输出：
两种方案：（1）周期性在命令行窗口打印出当前排队的普通客户数、VIP客户数，各营业窗口的状态、正在服务的客户号码，是否等待下班。（2）当有事件发生时，在命令行窗口打印出客户到达号码、当前排队的普通客户数、VIP客户数，各营业窗口的状态、正在服务的客户号码。
b．动画显示：在窗口中绘制各营业窗口的叫号显示牌和取号机的两个按钮，另外再开辟一块显示区，显示当前最大的客户号码、排队人数、下班时间或等待下班的提示。为了控制窗口的暂停、下班，需要设置相应的按钮。VIP客户的身份号输入，要在取号机旁边开辟输入区，可以文本框输入，也可以数字面板点击输入。
c．银行营业厅运行情况的记录（结果）文件。
记录文件也是文本文件，每一行表示一个时刻的银行营业状态，包括以下内容：
当前时间：程序开始运行的系统时钟时间，单位秒。
最大客户服务号码：最后到达的客户号码，字符串表示，占3个字节（000－999，V00-V99）。
普通客户排队数：000-999。
VIP客户排队数：00-99。
各窗口状态：窗口号-窗口状态-客户号（客户号只有在窗口处于等待客户到来或者服务客户的状态下才填写）。
是否下班：Y/N。
每个数据项之间用一个空格隔开。
   D.统计结果文件，
五．自由选择的高级功能
以下内容仅供有余力的同学参考实现。
1．	可以设置多种办理业务，不同类别业务的办理时间不同，而客户办理各类别业务的几率随机。
2．营业窗口叫号两次，客户若不应答，则做过号处理。
